---
title: 回顾《Microservices》系列之四：智能终端与哑管道到底解决了什么问题
date: 2022-03-02 16:53:00
---

> 本文是笔者作为企业架构咨询顾问，以《Microservices》文章作为主轴，在不同客户企业经历各式各样服务化项目后的所感所想

本章节原标题“Smart endpoints and dumb pipes”（注意到这里的”智能“是Smart而非AI中的“Intelligence”）

文章首先举例企业消息总线（ESB），这种产品往往包含了**复杂的消息路由、业务规则、模型转换**。目前很多企业采用了这种模式帮助系统集成。

之后提到了微服务推荐的两种集成模式：

-   HTTP
-   轻量级消息

两者相似点就是简单、轻量，专注作为技术底座而不负责业务逻辑。

然而在笔者遇到的企业应用中，不少架构设计和现状仍然背道而驰，似乎并没有意识到这些原则解决的问题：

#### 丢失的软件工程收益

业务逻辑在服务中实现，往往伴随着完整的测试与验证流程、安全扫描、版本控制，这些往往是产品化软件（如ESB、低代码平台）等无法保证的

#### 业务变化的频次与复杂度

软件往往解决的是已知问题，例如财务软件、ERP等，他们的输入与产出物格式和在行业中相对固定

而业务的复杂度往往是新的设计、新的玩法，带来的是未知，需要需求分析、实验、快速验证等手段帮助实现。

在此过程中，成品软件往往无法解决此类问题，也无法很好的适应业务变更节奏，作为企业不会买一个ERP的团队天天帮你改代码逻辑

#### 数据管道与业务逻辑耦合

”领域驱动设计“作为业界服务化设计的重要理论，始终都在弱化”数据“而在强化”模型“的重要性，我们更推荐通过清晰的接口来帮助系统集成，而不是各个系统的数据库通过ETL这种形式数据与数据对话。

因此展开来讲，这里的“哑管道”完全可以替代为“**哑中间件**”，实践也证明了我们不应该把业务逻辑、模型构筑关系放在中间件里边，比如“存储过程”和“视图”

中间件能力的抽象与实现的解耦帮助我们在中间件选择上有更高的自由度，可以用更低的成本更换中间件或供应商，避免核心业务与特定中间件或供应商绑定
